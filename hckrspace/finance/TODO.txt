



пересчёт и сверка итогов

каждая новая транзакция создаёт ещё один или несколько изменений баланса и тоталов

Действия:
0) произвольная транзакция
1) взнос
2) произвольная оплата
3) обмен
4) оплата счёта

5) счёт
6) контракт


Просмотр всех транзакций вместе с ивентами и итогами в одной таблице
фильтры: взносы/оплаты/остальное
группировка по месяцам
фильтр по субъектам
фильтр по назначениям платежа


сводные данные:
- суммы и баланс текущие и по месяцам
- задолженность по каждому виду оплаты и всего
- задолженность на следующий месяц



Сумма в определённой валюте - отдельный тип чтобы вводить и выводить данные в удобном виде.



интеграция:

1) связь между модулями - через пары type:integer,id:string
2) модуль запрашивает у интегратора объект с типом и id для отображения в таблицах вместо type+id
	или модуль запрашивает у интегратора список объектов одного типа с id из списка
3) тип - это номер таблицы-интерфейса
	например модуль finance запрашивает у интегратора объект с таким-то id из модуля personal_info
4) нужен глобальный учёт таблиц-интерфейсов
5) external_id жёстко привязан к объекту в базе модуля, а external_type - к таблице с этими объектами
6) интегратор по глобальной таблице выбирает из какого модуля ему запрашивать объект и запрашивает
7) если модуля нет, или модуль вернул ошибку, или объект не найден - интегратор использует заглушки
8) когда добавляется модуль - всё что ему нужно сделать - зарегистрировать свои интерфейсы у интегратора
9) в полной мере только родной для объектов модуль может отображать содержимое объекта потому что только он знает что это за объект
	но другим модулям, ссылающимся на этот объект тоже надо его отображать:
	из полученного объекта можно получить его представление для "чужих" модулей:
		- короткое текстовое представление
		- расширенное текстовое представление
		- ссылка на детальное описание объекта

пока обойдёмся этим, но если этого не хватит - придётся кроме типа и идентификатора добавлять тип представления и тогда модуль уже будет возвращать сложный объект для преобразования в html или сразу html

? надо ли модулю декларировать свои зависимости (external_type которые он использует) ?



модули:
1) personal_info
2) contacts
3) finance
4) credentials (на случай удалённого входа)
5) social_info (интересы и т.д.)
6) projects
7) access_rights



